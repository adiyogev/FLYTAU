<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FLYTAU - העולם מחכה לך</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Heebo:wght@300;400;500;700;800;900&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --bg-body: #f1f5f9;
            --bg-card: #ffffff;
            --text-main: #001b33;
            --text-secondary: #64748b;
            --flytau-navy: #001b33;
            --flytau-teal: #00818a;
            --flytau-teal-hover: #006b72;
            --input-bg: #f8fafc;
            --border-color: #cbd5e1;
            --card-shadow: 0 20px 50px rgba(0,0,0,0.15);
            --header-shadow: 0 4px 10px rgba(0,0,0,0.05);
        }

        body {
            font-family: 'Heebo', sans-serif;
            background-color: var(--bg-body);
            color: var(--text-main);
            margin: 0;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        header {
            width: 100%;
            background: var(--bg-card);
            padding: 10px 0;
            box-shadow: var(--header-shadow);
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .header-right {
            display: flex;
            align-items: center;
            margin-right: 40px;
        }

        .logo-text-fallback {
            font-weight: 900;
            font-size: 28px;
            color: #001b33;
            margin-left: 30px;
            text-decoration: none;
            letter-spacing: -1px;
        }
        .logo-text-fallback span { color: var(--flytau-teal); }

        /* לוגו גדול ובולט */
        .logo-img {
            height: 75px; 
            margin-left: 30px;
            display: block;
            object-fit: contain;
        }

        .main-nav a {
            text-decoration: none;
            color: var(--text-main);
            font-weight: 700;
            font-size: 16px;
            margin-left: 20px;
            position: relative;
            transition: color 0.3s;
        }
        
        .main-nav a.active { color: var(--flytau-teal); }
        .main-nav a.active::after {
            content: ''; position: absolute; bottom: -5px; left: 0; width: 100%; height: 3px; background: var(--flytau-teal); border-radius: 2px;
        }

        .header-left {
            margin-left: 40px;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .auth-link {
            text-decoration: none;
            color: var(--text-secondary);
            font-weight: 500;
            font-size: 14px;
            transition: 0.2s;
            cursor: pointer;
        }
        .auth-link:hover { color: var(--flytau-teal); }
        .auth-link.logout:hover { color: #ef4444; }

        .btn-register {
            background: var(--flytau-navy);
            color: white;
            padding: 8px 20px;
            border-radius: 20px;
            text-decoration: none;
            font-weight: 600;
            font-size: 14px;
            transition: 0.2s;
        }
        .btn-register:hover { opacity: 0.9; }

        .user-greeting {
            font-weight: 600;
            color: var(--text-main);
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .user-greeting span { color: var(--flytau-teal); }

        /* רקע מטוס בשקיעה עם Overlay לניגודיות */
        .hero-section {
            background: linear-gradient(rgba(0, 27, 51, 0.5), rgba(0, 27, 51, 0.4)), 
                        url('https://images.unsplash.com/photo-1506012733851-bb0755199546?q=80&w=2000&auto=format&fit=crop');
            background-size: cover;
            background-position: center;
            color: white;
            padding: 80px 20px 140px;
            text-align: center;
            position: relative;
        }

        .hero-title { 
            font-size: 54px; 
            font-weight: 800; 
            margin-bottom: 10px; 
            letter-spacing: -1px;
            text-shadow: 0 4px 15px rgba(0,0,0,0.5);
        }
        .hero-subtitle { 
            font-size: 22px; 
            opacity: 0.95; 
            margin-bottom: 30px; 
            font-weight: 400;
            text-shadow: 0 2px 8px rgba(0,0,0,0.5);
        }

        .search-container {
            max-width: 1000px;
            margin: -90px auto 40px;
            padding: 0 20px;
            position: relative;
            z-index: 10;
        }

        .search-card {
            background: var(--bg-card);
            border-radius: 24px;
            padding: 30px;
            box-shadow: var(--card-shadow);
        }

        .form-title {
            color: var(--text-secondary);
            font-size: 14px;
            font-weight: 700;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .search-form-grid {
            display: grid;
            grid-template-columns: 2.5fr 40px 2.5fr 1.5fr 1.2fr;
            gap: 15px;
            align-items: end;
        }

        .input-group { display: flex; flex-direction: column; gap: 8px; position: relative; }
        .input-label { font-size: 13px; font-weight: 700; color: var(--text-secondary); }

        .input-field-wrapper {
            position: relative;
            background: var(--input-bg);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 12px 15px;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: 0.3s;
            height: 24px;
        }

        .input-field-wrapper:focus-within {
            border-color: var(--flytau-teal);
            box-shadow: 0 0 0 3px rgba(0, 129, 138, 0.1);
            background: var(--bg-card);
        }

        .input-field-wrapper i { color: var(--flytau-teal); font-size: 18px; }
        .input-field-wrapper input, .input-field-wrapper select {
            border: none; background: transparent; width: 100%;
            font-family: inherit; font-size: 16px; font-weight: 500;
            color: var(--text-main); outline: none; cursor: pointer;
        }

        .suggestions-list {
            position: absolute;
            top: 100%; left: 0; right: 0;
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            margin-top: 5px;
            list-style: none;
            padding: 0;
            max-height: 200px;
            overflow-y: auto;
            z-index: 100;
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
            display: none;
        }
        .suggestions-list li {
            padding: 12px 15px; cursor: pointer; border-bottom: 1px solid var(--border-color);
            font-size: 14px; color: var(--text-main); display: flex; justify-content: space-between;
        }
        .suggestions-list li:hover { background-color: var(--input-bg); color: var(--flytau-teal); }
        .suggestions-list li:last-child { border-bottom: none; }
        .suggestion-code { font-weight: 800; color: var(--flytau-teal); }

        .swap-btn {
            width: 40px; height: 40px; background: var(--input-bg); border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            border: 1px solid var(--border-color);
            cursor: pointer; color: var(--text-secondary); transition: 0.3s; margin-bottom: 5px;
        }
        .swap-btn:hover { background: var(--border-color); transform: rotate(180deg); color: var(--flytau-teal); }

        .submit-container { grid-column: 1 / -1; margin-top: 20px; }

        .search-btn {
            background: var(--flytau-teal); color: white; border: none;
            padding: 16px; border-radius: 12px; font-size: 20px; font-weight: 700;
            cursor: pointer; transition: 0.3s; width: 100%;
            box-shadow: 0 10px 20px rgba(0, 129, 138, 0.2);
            display: flex; align-items: center; justify-content: center; gap: 10px;
        }
        .search-btn:hover { background: var(--flytau-teal-hover); transform: translateY(-2px); box-shadow: 0 15px 30px rgba(0, 129, 138, 0.3); }
        
        .fa-spinner { animation: spin 1s linear infinite; }
        @keyframes spin { 100% { transform: rotate(360deg); } }

        .discover-section { max-width: 1000px; margin: 20px auto 60px; padding: 0 20px; }
        .section-header { margin-bottom: 20px; }
        .section-header h2 { font-size: 24px; color: var(--text-main); margin: 0; font-weight: 800; }
        .section-header p { color: var(--text-secondary); margin-top: 5px; font-size: 15px; }

        .deals-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px; }

        .deal-card {
            background: var(--bg-card); border-radius: 16px; overflow: hidden;
            box-shadow: var(--card-shadow); transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer; position: relative; border: 1px solid var(--border-color);
        }
        .deal-card:hover { transform: translateY(-8px); box-shadow: 0 20px 40px rgba(0,0,0,0.2); }

        .card-image { height: 150px; width: 100%; position: relative; background-color: #cbd5e1; }
        .card-image img { width: 100%; height: 100%; object-fit: cover; }

        .price-tag {
            position: absolute; top: 10px; left: 10px; background: var(--flytau-navy);
            color: white; padding: 4px 10px; border-radius: 15px; font-weight: 700;
            font-size: 13px; box-shadow: 0 4px 10px rgba(0,0,0,0.2); z-index: 2;
        }

        .card-content { padding: 15px; }
        .city-name { font-size: 16px; font-weight: 800; color: var(--text-main); margin-bottom: 4px; }
        .country-name { font-size: 13px; color: var(--text-secondary); font-weight: 500; display: flex; justify-content: space-between; align-items: center; }
        .flight-type { font-size: 11px; background: rgba(0, 129, 138, 0.1); color: var(--flytau-teal); padding: 3px 7px; border-radius: 6px; font-weight: 700; }

        @media (max-width: 900px) {
            .deals-grid { grid-template-columns: repeat(2, 1fr); }
            .search-form-grid { grid-template-columns: 1fr; }
            .swap-btn { transform: rotate(90deg); margin: 0 auto; }
            .header-right { flex-direction: column; align-items: flex-start; }
            .main-nav { margin-top: 10px; }
            .logo-text-fallback, .logo-img { margin-left: 0; }
        }
        @media (max-width: 500px) {
            .deals-grid { grid-template-columns: 1fr; }
        }

        footer { margin-top: auto; background: #001b33; color: white; padding: 20px; text-align: center; font-size: 13px; opacity: 0.9; }
    </style>
</head>
<body>

    <header>
        <div class="header-right">
            <div id="logo-container">
                <img src="{{ url_for('static', filename='LOGO.jpeg') }}" alt="FLYTAU Logo" class="logo-img" onerror="this.style.display='none'; document.getElementById('backup-logo').style.display='block';">
                <div id="backup-logo" class="logo-text-fallback" style="display:none;">
                    FLY<span>TAU</span>
                </div>
            </div>
            <nav class="main-nav">
                <a href="/" class="active">חיפוש טיסות</a>
            </nav>
        </div>
        <div class="header-left">
            {% if is_logged_in and user_name %}
            <div class="user-greeting">
                <i class="fas fa-user-circle" style="font-size: 20px;"></i>
                שלום, <span>{{ user_name }}</span>
            </div>
            <a href="/my_orders" class="auth-link">ניהול הזמנות</a>
            <a href="/logout" class="auth-link logout">התנתק</a>
            {% else %}
            <div class="user-greeting" style="margin-left: 15px; font-weight:400; font-size:14px;">
                שלום, אורח
            </div>
            <a href="/login_manager" class="auth-link">כניסת מנהל</a>
            <a href="/login" class="auth-link">התחברות</a>
            <a href="/register" class="btn-register">הירשם</a>
            {% endif %}
        </div>
    </header>

    <div class="hero-section">
        <div class="hero-title">העולם מחכה לך</div>
        <div class="hero-subtitle">גלה יעדים חדשים במחירים שלא הכרת</div>
    </div>

    <div class="search-container">
        <div class="search-card">
            <div class="form-title">
                <i class="fas fa-plane"></i> פרטי הטיסה (כיוון אחד)
            </div>

            <form class="search-form-grid" id="search-form" action="/search_flights" method="GET">
                
                <div class="input-group">
                    <label class="input-label">מאיפה טסים?</label>
                    <div class="input-field-wrapper">
                        <i class="fas fa-plane-departure"></i>
                        <input type="text" name="origin" value="תל אביב (TLV)" id="origin" autocomplete="off" oninput="showSuggestions(this.value, 'suggestions-origin', 'origin')" required>
                    </div>
                    <ul class="suggestions-list" id="suggestions-origin"></ul>
                </div>

                <button type="button" class="swap-btn" onclick="swapDestinations()">
                    <i class="fas fa-exchange-alt"></i>
                </button>

                <div class="input-group">
                    <label class="input-label">לאן טסים?</label>
                    <div class="input-field-wrapper">
                        <i class="fas fa-plane-arrival"></i>
                        <input type="text" name="destination" placeholder="התחל להקליד יעד..." id="destination" autocomplete="off" oninput="showSuggestions(this.value, 'suggestions-dest', 'destination')" required>
                    </div>
                    <ul class="suggestions-list" id="suggestions-dest"></ul>
                </div>

                <div class="input-group">
                    <label class="input-label">תאריך המראה</label>
                    <div class="input-field-wrapper">
                        <i class="far fa-calendar-alt"></i>
                        <input type="date" name="departure_date" required id="flight-date">
                    </div>
                </div>

                <div class="input-group">
                    <label class="input-label">מספר נוסעים</label>
                    <div class="input-field-wrapper">
                        <i class="fas fa-user-friends"></i>
                        <input type="number" name="num_passengers" id="passengers-count" min="1" value="1" placeholder="כמות">
                    </div>
                </div>

                <div class="submit-container">
                    <button type="submit" class="search-btn" id="search-btn">
                        <span><i class="fas fa-search"></i> מצא לי טיסה</span>
                    </button>
                </div>
            </form>
        </div>
    </div>

    <div class="discover-section">
        <div class="section-header">
            <h2>היעדים החמים של העונה</h2>
            <p>טיסות ישירות במחירים שלא יחזרו, שריינו את המושב שלכם עכשיו</p>
        </div>

        <div class="deals-grid">
            <div class="deal-card" onclick="selectPromoDestination('לונדון (LHR)')">
                <div class="card-image">
                    <span class="price-tag">$420</span>
                    <img src="https://images.unsplash.com/photo-1513635269975-59663e0ac1ad?q=80&w=800&auto=format&fit=crop" alt="London">
                </div>
                <div class="card-content">
                    <div class="city-name">לונדון</div>
                    <div class="country-name">אנגליה <span class="flight-type">ישיר</span></div>
                </div>
            </div>
            <div class="deal-card" onclick="selectPromoDestination('ניו יורק (JFK)')">
                <div class="card-image">
                    <span class="price-tag">$650</span>
                    <img src="https://images.unsplash.com/photo-1534270804882-6b5048b1c1fc?q=80&w=800&auto=format&fit=crop" alt="New York">
                </div>
                <div class="card-content">
                    <div class="city-name">ניו יורק</div>
                    <div class="country-name">ארה"ב <span class="flight-type">ישיר</span></div>
                </div>
            </div>
            <div class="deal-card" onclick="selectPromoDestination('פריז (CDG)')">
                <div class="card-image">
                    <span class="price-tag">$380</span>
                    <img src="https://images.unsplash.com/photo-1502602898657-3e91760cbb34?q=80&w=800&auto=format&fit=crop" alt="Paris">
                </div>
                <div class="card-content">
                    <div class="city-name">פריז</div>
                    <div class="country-name">צרפת <span class="flight-type">מבצע</span></div>
                </div>
            </div>
            <div class="deal-card" onclick="selectPromoDestination('דובאי (DXB)')">
                <div class="card-image">
                    <span class="price-tag">$290</span>
                    <img src="https://images.unsplash.com/photo-1518684079-3c830dcef090?q=80&w=800&auto=format&fit=crop" alt="Dubai">
                </div>
                <div class="card-content">
                    <div class="city-name">דובאי</div>
                    <div class="country-name">איחוד האמירויות <span class="flight-type">חם!</span></div>
                </div>
            </div>
        </div>
    </div>

    <footer>
        © 2025 FLYTAU - מערכת הזמנת טיסות אקדמית.
    </footer>

    <script>
        function setMinDate() {
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('flight-date').setAttribute('min', today);
        }

        const airports = [
            { name: "תל אביב", code: "TLV" },
            { name: "ניו יורק", code: "JFK" },
            { name: "לונדון", code: "LHR" },
            { name: "פריז", code: "CDG" },
            { name: "דובאי", code: "DXB" },
            { name: "אמסטרדם", code: "AMS" },
            { name: "רומא", code: "FCO" },
            { name: "בנגקוק", code: "BKK" },
            { name: "ברלין", code: "BER" },
            { name: "אתונה", code: "ATH" }
        ];

        function showSuggestions(val, listId, inputId) {
            const list = document.getElementById(listId);
            list.innerHTML = '';
            
            if (!val) {
                list.style.display = 'none';
                return;
            }

            const filtered = airports.filter(port => 
                port.name.includes(val) || port.code.toLowerCase().includes(val.toLowerCase())
            );

            if (filtered.length > 0) {
                filtered.forEach(port => {
                    const li = document.createElement('li');
                    li.innerHTML = `${port.name} <span class="suggestion-code">${port.code}</span>`;
                    li.onclick = () => {
                        document.getElementById(inputId).value = `${port.name} (${port.code})`;
                        list.style.display = 'none';
                    };
                    list.appendChild(li);
                });
                list.style.display = 'block';
            } else {
                list.style.display = 'none';
            }
        }

        document.addEventListener('click', function(e) {
            if (!document.getElementById('origin').contains(e.target)) {
                document.getElementById('suggestions-origin').style.display = 'none';
            }
            if (!document.getElementById('destination').contains(e.target)) {
                document.getElementById('suggestions-dest').style.display = 'none';
            }
        });

        function swapDestinations() {
            const origin = document.getElementById('origin');
            const dest = document.getElementById('destination');
            const temp = origin.value;
            origin.value = dest.value;
            dest.value = temp;
            
            const btn = document.querySelector('.swap-btn');
            btn.style.transform = 'rotate(180deg)';
            setTimeout(() => btn.style.transform = 'rotate(0deg)', 300);
        }

        function selectPromoDestination(city) {
            const destInput = document.getElementById('destination');
            destInput.value = city;
            window.scrollTo({ top: 150, behavior: 'smooth' });
        }

        setMinDate();
    </script>
</body>
</html>